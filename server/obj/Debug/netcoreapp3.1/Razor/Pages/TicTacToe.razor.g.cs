#pragma checksum "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2a22429da48303d168639902258c27c121aa991a"
// <auto-generated/>
#pragma warning disable 1591
namespace Projekt.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 6 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 7 "C:\Users\Admin\Desktop\Projekt\server\_Imports.razor"
using Projekt.Shared;

#line default
#line hidden
#line 11 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Radzen;

#line default
#line hidden
#line 12 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Radzen.Blazor;

#line default
#line hidden
#line 13 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#line 14 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Projekt.Models;

#line default
#line hidden
#line 15 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 16 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using System.Threading;

#line default
#line hidden
#line 17 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Data;

#line default
#line hidden
#line 18 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#line 19 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
           [Authorize]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(MainLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/")]
    [Microsoft.AspNetCore.Components.RouteAttribute("/tic-tac-toe")]
    public partial class TicTacToe : Projekt.Pages.TicTacToeComponent
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, @"<style>
    .tttbutton {
        height: 100px;
        width: 100px;
        margin: 5px;
    }

    .tttfont {
        font-size: 60px;
    }

    .btn:focus {
        outline: none;
    }

    .first-row {
        padding-top: 10px;
    }

    .win-message {
        margin-top: 1%;
    }

    .new-game-buttons {
        margin-top: 1%;
    }

    .alert-custom {
        background-color: #69e649;
        color: #fff;
    }
</style>

");
            __builder.OpenComponent<Radzen.Blazor.RadzenContent>(1);
            __builder.AddAttribute(2, "Container", "main");
            __builder.AddAttribute(3, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Radzen.Blazor.RadzenHeading>(4);
                __builder2.AddAttribute(5, "Size", "H1");
                __builder2.AddAttribute(6, "Text", "TicTacToe");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(7, "\n        ");
                __builder2.OpenElement(8, "div");
                __builder2.AddAttribute(9, "class", "row");
#line 59 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
             if (_gamesettings.PlayerXTurn)
            {

#line default
#line hidden
                __builder2.AddMarkupContent(10, "<div class=\"alert alert-light\" role=\"alert\">Player X Turn</div>");
#line 61 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                               }

#line default
#line hidden
#line 62 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
             if (_gamesettings.PlayerOTurn)
            {

#line default
#line hidden
                __builder2.AddMarkupContent(11, "<div class=\"alert alert-light\" role=\"alert\">Player O Turn</div>");
#line 64 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                               }

#line default
#line hidden
                __builder2.CloseElement();
                __builder2.AddMarkupContent(12, "\n        ");
                __builder2.OpenElement(13, "div");
                __builder2.AddAttribute(14, "class", "row win-message");
#line 67 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
             if (_gamesettings.OWon)
            {

#line default
#line hidden
                __builder2.AddMarkupContent(15, "<div class=\"alert alert-custom\" role=\"alert\"><strong>Game Over:</strong> Player O has won the game!</div>");
#line 69 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                         }

#line default
#line hidden
#line 70 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
             if (_gamesettings.XWon)
            {

#line default
#line hidden
                __builder2.AddMarkupContent(16, "<div class=\"alert alert-custom\" role=\"alert\"><strong>Game Over:</strong> Player X has won the game!</div>");
#line 72 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                         }

#line default
#line hidden
#line 73 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
             if (_gamesettings.CatGame)
            {

#line default
#line hidden
                __builder2.AddMarkupContent(17, "<div class=\"alert alert-custom\" role=\"alert\"><strong>Game Over:</strong> Cat game! Everyone wins!</div>");
#line 75 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                       }

#line default
#line hidden
                __builder2.CloseElement();
                __builder2.AddMarkupContent(18, "\n        ");
                __builder2.OpenElement(19, "div");
                __builder2.AddAttribute(20, "class", "game-board");
                __builder2.OpenElement(21, "div");
                __builder2.AddAttribute(22, "class", "row first-row");
                __builder2.OpenElement(23, "button");
                __builder2.AddAttribute(24, "id", "btn1");
                __builder2.AddAttribute(25, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(26, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 79 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(0))

#line default
#line hidden
                ));
                __builder2.AddContent(27, 
#line 79 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[0]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(28, "\n                ");
                __builder2.OpenElement(29, "button");
                __builder2.AddAttribute(30, "id", "btn2");
                __builder2.AddAttribute(31, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(32, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 80 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(1))

#line default
#line hidden
                ));
                __builder2.AddContent(33, 
#line 80 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[1]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(34, "\n                ");
                __builder2.OpenElement(35, "button");
                __builder2.AddAttribute(36, "id", "btn3");
                __builder2.AddAttribute(37, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(38, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 81 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(2))

#line default
#line hidden
                ));
                __builder2.AddContent(39, 
#line 81 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[2]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(40, "\n            ");
                __builder2.OpenElement(41, "div");
                __builder2.AddAttribute(42, "class", "row");
                __builder2.OpenElement(43, "button");
                __builder2.AddAttribute(44, "id", "btn1");
                __builder2.AddAttribute(45, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(46, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 84 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(3))

#line default
#line hidden
                ));
                __builder2.AddContent(47, 
#line 84 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[3]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(48, "\n                ");
                __builder2.OpenElement(49, "button");
                __builder2.AddAttribute(50, "id", "btn2");
                __builder2.AddAttribute(51, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(52, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 85 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(4))

#line default
#line hidden
                ));
                __builder2.AddContent(53, 
#line 85 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[4]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(54, "\n                ");
                __builder2.OpenElement(55, "button");
                __builder2.AddAttribute(56, "id", "btn3");
                __builder2.AddAttribute(57, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(58, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 86 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(5))

#line default
#line hidden
                ));
                __builder2.AddContent(59, 
#line 86 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[5]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(60, "\n            ");
                __builder2.OpenElement(61, "div");
                __builder2.AddAttribute(62, "class", "row");
                __builder2.OpenElement(63, "button");
                __builder2.AddAttribute(64, "id", "btn1");
                __builder2.AddAttribute(65, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(66, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 89 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(6))

#line default
#line hidden
                ));
                __builder2.AddContent(67, 
#line 89 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[6]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(68, "\n                ");
                __builder2.OpenElement(69, "button");
                __builder2.AddAttribute(70, "id", "btn2");
                __builder2.AddAttribute(71, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(72, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 90 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(7))

#line default
#line hidden
                ));
                __builder2.AddContent(73, 
#line 90 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[7]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(74, "\n                ");
                __builder2.OpenElement(75, "button");
                __builder2.AddAttribute(76, "id", "btn3");
                __builder2.AddAttribute(77, "class", "btn btn-outline-info tttbutton tttfont");
                __builder2.AddAttribute(78, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 91 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                           (() => GameClick(8))

#line default
#line hidden
                ));
                __builder2.AddContent(79, 
#line 91 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                                                                  _gamesettings.Game[8]

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(80, "\n        ");
                __builder2.OpenElement(81, "div");
                __builder2.AddAttribute(82, "class", "row new-game-buttons");
                __builder2.OpenElement(83, "button");
                __builder2.AddAttribute(84, "id", "btn-new-game");
                __builder2.AddAttribute(85, "class", "btn btn-primary m-1");
                __builder2.AddAttribute(86, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 95 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                            NewBotGameClick

#line default
#line hidden
                ));
                __builder2.AddContent(87, "New Player vs Bot Game");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(88, "\n            ");
                __builder2.OpenElement(89, "button");
                __builder2.AddAttribute(90, "id", "btn-new-game");
                __builder2.AddAttribute(91, "class", "btn btn-primary m-1");
                __builder2.AddAttribute(92, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 96 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                                                            NewHumanGameClick

#line default
#line hidden
                ));
                __builder2.AddContent(93, "New Player vs Human Game");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(94, "\n        ");
                __builder2.OpenElement(95, "div");
                __builder2.AddAttribute(96, "class", "row");
                __builder2.OpenElement(97, "span");
                __builder2.AddContent(98, "Connection State = ");
                __builder2.AddContent(99, 
#line 99 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
                                      _hubConnection.State

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#line 105 "C:\Users\Admin\Desktop\Projekt\server\Pages\TicTacToe.razor"
        
            private HubConnection _hubConnection;
            private GameModel _gamesettings;

            protected List<string> messages = new List<string>();

            protected override async Task OnInitializedAsync()
            {
                _gamesettings = await GameModelService.GetHumanGameBoardAsync();
                _hubConnection = new HubConnectionBuilder()
                    .WithUrl(NavigationManager.ToAbsoluteUri("/gameHub"))
                    .Build();

                _hubConnection.On<GameModel>(ClientEndpoints.ReceiveMessage, (gamesettings) =>
                {
                    _gamesettings = gamesettings;
                    StateHasChanged();
                });

                _hubConnection.On<GameModel>(ClientEndpoints.EndTurn, async (gamesettings) =>
                {
                    if (gamesettings.Botturn)
                    {
                        await this.Write($"Turn {gamesettings.TurnCount} - Human Turn Over");
                    }
                    else
                    {
                        await this.Write($"Turn {gamesettings.TurnCount} - Bot Turn Over.");

                    }

                    await this.Write(Newtonsoft.Json.JsonConvert.SerializeObject(gamesettings.Game, Newtonsoft.Json.Formatting.None));

                    if (!gamesettings.Gameover)
                    {
                        _gamesettings = gamesettings;
                        StateHasChanged();
                        if (_gamesettings.Botturn)
                        {

                            await DoBotTurn();
                        }
                    }
                });

                _hubConnection.On<GameModel>(ClientEndpoints.NewHumanGame, (gamesettings) =>
                {
                    _gamesettings = gamesettings;
                    StateHasChanged();
                });

                _hubConnection.On<GameModel>(ClientEndpoints.NewBotGame, async (gamesettings) =>
                {
                    this.messages.Clear();
                    await this.Write($"Starting New Bot Game");
                    _gamesettings = gamesettings;
                    StateHasChanged();
                });

                _hubConnection.On<GameModel>(ClientEndpoints.GameOver, async (gamesettings) =>
                {
                    await this.Write($"Turn {gamesettings.TurnCount} - Game Over.");
                    await this.Write(Newtonsoft.Json.JsonConvert.SerializeObject(gamesettings.Game, Newtonsoft.Json.Formatting.None));
                    _gamesettings = gamesettings;
                    StateHasChanged();
                });


                await _hubConnection.StartAsync();
            }

            private async Task Write(string message)
            {
                this.messages.Add(message);
                await this.JSRuntime.InvokeVoidAsync("console.log", message);
            }

            public bool IsConnected => _hubConnection.State == HubConnectionState.Connected;
            Task Send() => _hubConnection.SendAsync(ServerEndpoints.SendMessage, _gamesettings);
            Task DoBotTurn() => _hubConnection.SendAsync(ServerEndpoints.TakeBotTurn, _gamesettings);
            Task NewBotGameClick() => _hubConnection.SendAsync(ServerEndpoints.NewBotGame, _gamesettings);
            Task NewHumanGameClick() => _hubConnection.SendAsync(ServerEndpoints.NewHumanGame, _gamesettings);
            Task TakePlayerTurn(int i) => _hubConnection.SendAsync(ServerEndpoints.TakePlayerTurn, i, _gamesettings);


            public async Task GameClick(int i)
            {
                if (!_gamesettings.Gameover && !_gamesettings.Botturn && string.IsNullOrEmpty(_gamesettings.Game[i]))
                {
                    await TakePlayerTurn(i);
                }
            } 
    

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private GameHub GameHub { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private GameModelService GameModelService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
